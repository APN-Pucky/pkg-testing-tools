name: test self

on:
  push:
    branches: [ "master" ]

jobs:
  build:
    runs-on: ubuntu-latest
    container: apnpucky/gentoo-apn:latest
    steps:
    - run: echo 'pkg-testing-tools **' > /etc/portage/package.accept_keywords/pkg-testing-tools
    - run: emerge =pkg-testing-tools-9999
    - name: Test default
      run: pkg-testing-tool -p '=pkg-testing-tools-9999'
    - name: Test -C
      run: pkg-testing-tool -C -p '=pkg-testing-tools-9999'
    - name: Test -f
      run: pkg-testing-tool -f '/var/db/repos/gentoo/app-portage/pkg-testing-tools/pkg-testing-tools-9999.ebuild'
